---
title: Dcoker系列01-Docker概述
author: ifuncat
date: 2021-05-18 22:22:22 +0800
categories: [Docker]
tags: [Docker]
---

### 一. 容器与虚拟机
#### 1. 虚拟机
- 每台虚拟机都需要有自己的操作系统, 虚拟机一旦被开启, 预分配给它的资源将全部被占用
- 每一台虚拟机包括应用, 必要的二进制文件和库, 以及一个完整的用户操作系统.
- 常用的传统虚拟机如VMWare, VisualBox, ParallelsDesktop

#### 2. 容器
- 容器和宿主机共享硬件资源及操作系统, 可以实现资源的动态分配.
- 容器包含应用和其所有的依赖包, 但是与其他容器共享内核. 容器在宿主机操作系统中, 运行在用户空间分离的进程中.
- 容器技术是实现操作系统虚拟化的一种途径, 可以在资源受到隔离的进程中运行应用程序及其依赖关系.
- 通过使用容器，我们可以轻松打包应用程序的代码、配置和依赖关系，将其变成容易使用的构建块，从而实现环境一致性、运营效率、开发人员生产力和版本控制等诸多目标.
- 容器可以帮助保证应用程序快速、可靠、一致地部署，其间不受部署环境的影响, 同时对资源精细化控制，提高基础设施效率.

#### 3. 容器与虚拟机的区别
<img src="https://cdn.jsdelivr.net/gh/ifuncat/blog-images/post/docker/docker01-1.png" width="60%">

### 二. 环境配置难题及解决方案
#### 1. 环境配置难题

- 软件开发最大的麻烦事之一就是环境配置, 用户必须保证操作系统设置和各种库和组件都正确, 软件才能正确运行. 类如安装一个 Python 应用，计算机必须有 Python 引擎，还必须有各种依赖，可能还要配置环境变量.
- 如果某些老旧的模块与当前环境不兼容, 可能引起在这台机器正常运行, 在其他机器无法运行.
- 环境配置如此麻烦, 换一台机器就要重写配置一次, 非常耗时, 从根本上解决问题的方案: 安装目标软件的时候把原始环境一模一样地复制过来.
#### 2. 虚拟机解决

- 虚拟机就是带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响.
- 虚拟机解决方案存在以下缺点
   - **资源占用多**: 虚拟机会独占一部分内存和硬盘空间, 其在运行时, 其他程序就不能使用这些资源了, 哪怕虚拟机正在执行的应用实际使用的内存为1MB, 虚拟机依然需要几百MB的内存才能运行.
   - **冗余步骤多**: 虚拟机是完整的操作系统, 一些系统级别的操作步骤往往无法跳过, 比如用户登录
   - **启动慢**: 启动操作系统一般耗时几分钟, 应用程序才能真正开始执行.
#### 2. Linux容器解决

- linux容器不是模拟一个完整的操作系统, 而是对进程进行隔离, 或者说, 在正常进程的外面套了一个保护层, 对于容器里面的进程来说, 其接触到的各种资源都是虚拟的, 从而实现与底层系统的隔离.
- 由于容器是进程级别的, 相比虚拟机有很多优势
   - 启动快: 容器中的应用就是底层系统中的一个进程, 所以容器相当于启动本机的一个进程, 而不是像虚拟机一样启动一个操作系统, 速度快很多.
   - 资源占用少: 容器只占用需要的资源, 不占用那些没有用到的资源. 虚拟机由于是完整的操作系统, 不可避免地要占用所有之前分配的资源. 另外多个容器可以共享资源, 
### 三. docker是什么
#### 1. 为什么会出现Docker

- 一款产品从开发到上线, 从操作系统到运行环境, 应用配置需要关心很多东西. 特别是多个版本迭代之后, 需要重点关注不同版本环境的兼容性问题.
- Docker对上述问题给出了一个标准化的解决方案. 不同于传统的安装操作系统及各种lib等来搭建环境, dcoker可以把原始环境一模一样的复制过来, 最大程度上保证运行环境一致.
#### 2. Docker的理念

- Build, Ship and Run Any APP, anywhere, 即一次封装到处运行.
- Docker容器在运河操作系统都是一致的, 只需要一次配置好环境, 换到别的机器上就可以一键部署好, 大大简化了操作
#### 3. 简单总结

- Docker解决了运行环境, 配置文件和软件容器之间的兼容性问题, 方便做持续集成, 且有助于整体发布的容器虚拟化技术